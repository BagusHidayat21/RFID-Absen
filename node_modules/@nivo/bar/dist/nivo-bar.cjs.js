"use strict";var e=require("@nivo/axes"),a=require("@nivo/core"),t=require("@react-spring/web"),i=require("react"),n=require("@nivo/annotations"),r=require("react/jsx-runtime"),l=require("@nivo/legends"),o=require("@nivo/colors"),d=require("@nivo/theming"),u=require("@nivo/tooltip"),s=require("@nivo/text"),c=require("@nivo/scales"),h=require("d3-shape"),v=require("lodash/uniqBy.js"),b=require("@nivo/canvas");function f(){return f=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var i in t)({}).hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},f.apply(null,arguments)}function g(e,a){if(null==e)return{};var t={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==a.indexOf(i))continue;t[i]=e[i]}return t}var m,x=function(e){var a=e.bars,t=e.annotations,i=n.useAnnotations({data:a,annotations:t,getPosition:function(e){return{x:e.x+e.width/2,y:e.y+e.height/2}},getDimensions:function(e){var a=e.height,t=e.width;return{width:t,height:a,size:Math.max(t,a)}}});return r.jsx(r.Fragment,{children:i.map((function(e,a){return r.jsx(n.Annotation,f({},e),a)}))})},p=function(e){var a=e.width,t=e.height,i=e.legends,n=e.toggleSerie;return r.jsx(r.Fragment,{children:i.map((function(e,i){var o,d=e[0],u=e[1];return r.jsx(l.BoxLegendSvg,f({},d,{containerWidth:a,containerHeight:t,data:null!=(o=d.data)?o:u,toggleSerie:d.toggleSerie&&"keys"===d.dataFrom?n:void 0}),i)}))})},y=["data"],k=function(e){var a,n=e.bar,l=n.data,o=g(n,y),c=e.style,h=c.borderColor,v=c.color,b=c.height,m=c.labelColor,x=c.labelOpacity,p=c.labelX,k=c.labelY,S=c.transform,C=c.width,w=c.textAnchor,L=e.borderRadius,V=e.borderWidth,M=e.label,B=e.shouldRenderLabel,T=e.isInteractive,W=e.onClick,O=e.onMouseEnter,I=e.onMouseLeave,R=e.tooltip,P=e.isFocusable,E=e.ariaLabel,j=e.ariaLabelledBy,F=e.ariaDescribedBy,A=e.ariaDisabled,H=e.ariaHidden,D=d.useTheme(),X=u.useTooltip(),Y=X.showTooltipFromEvent,q=X.showTooltipAt,G=X.hideTooltip,z=i.useMemo((function(){return function(){return i.createElement(R,f({},o,l))}}),[R,o,l]),N=i.useCallback((function(e){null==W||W(f({color:o.color},l),e)}),[o,l,W]),K=i.useCallback((function(e){return Y(z(),e)}),[Y,z]),_=i.useCallback((function(e){null==O||O(l,e),Y(z(),e)}),[l,O,Y,z]),J=i.useCallback((function(e){null==I||I(l,e),G()}),[l,G,I]),Q=i.useCallback((function(){q(z(),[o.absX+o.width/2,o.absY])}),[q,z,o]),U=i.useCallback((function(){G()}),[G]);return r.jsxs(t.animated.g,{transform:S,children:[r.jsx(t.animated.rect,{width:t.to(C,(function(e){return Math.max(e,0)})),height:t.to(b,(function(e){return Math.max(e,0)})),rx:L,ry:L,fill:null!=(a=l.fill)?a:v,strokeWidth:V,stroke:h,focusable:P,tabIndex:P?0:void 0,"aria-label":E?E(l):void 0,"aria-labelledby":j?j(l):void 0,"aria-describedby":F?F(l):void 0,"aria-disabled":A?A(l):void 0,"aria-hidden":H?H(l):void 0,onMouseEnter:T?_:void 0,onMouseMove:T?K:void 0,onMouseLeave:T?J:void 0,onClick:T?N:void 0,onFocus:T&&P?Q:void 0,onBlur:T&&P?U:void 0,"data-testid":"bar.item."+l.id+"."+l.index}),B&&r.jsx(s.Text,{x:p,y:k,textAnchor:w,dominantBaseline:"central",fillOpacity:x,style:f({},D.labels.text,{pointerEvents:"none",fill:m}),children:M})]})},S=["color","label"],C=function(e){var a=e.color,t=e.label,i=g(e,S);return r.jsx(u.BasicTooltip,{id:t,value:i.formattedValue,enableChip:!0,color:a})},w={indexBy:"id",keys:["value"],groupMode:"stacked",layout:"vertical",reverse:!1,minValue:"auto",maxValue:"auto",valueScale:{type:"linear"},indexScale:{type:"band",round:!0},padding:.1,innerPadding:0,axisBottom:{},axisLeft:{},enableGridX:!1,enableGridY:!0,enableLabel:!0,label:"formattedValue",labelPosition:"middle",labelOffset:0,labelSkipWidth:0,labelSkipHeight:0,labelTextColor:{from:"theme",theme:"labels.text.fill"},colorBy:"id",colors:{scheme:"nivo"},borderRadius:0,borderWidth:0,borderColor:{from:"color"},isInteractive:!0,tooltip:C,tooltipLabel:function(e){return e.id+" - "+e.indexValue},legends:[],initialHiddenIds:[],annotations:[],markers:[],enableTotals:!1,totalsOffset:10},L=f({},w,{layers:["grid","axes","bars","totals","markers","legends","annotations"],barComponent:k,defs:[],fill:[],animate:!0,motionConfig:"default",role:"img",isFocusable:!1}),V=f({},w,{layers:["grid","axes","bars","totals","legends","annotations"],pixelRatio:"undefined"!=typeof window&&null!=(m=window.devicePixelRatio)?m:1}),M=function(e,a,t,i,n,r){return c.computeScale(i,{all:e.map(a),min:0,max:0},n,r).padding(t)},B=function(e,a){return e.map((function(e){return f({},a.reduce((function(e,a){return e[a]=null,e}),{}),e)}))},T=function(e){return Object.keys(e).reduce((function(a,t){return e[t]&&(a[t]=e[t]),a}),{})},W=function(e){return[e,Number(e)]};function O(e,a,t,i){return void 0===e&&(e=w.layout),void 0===a&&(a=w.reverse),void 0===t&&(t=w.labelPosition),void 0===i&&(i=w.labelOffset),function(n,r){var l=i*(a?-1:1);if("horizontal"===e){var o=n/2;return"start"===t?o=a?n:0:"end"===t&&(o=a?0:n),{labelX:o+l,labelY:r/2,textAnchor:"middle"===t?"middle":a?"end":"start"}}var d=r/2;return"start"===t?d=a?0:r:"end"===t&&(d=a?r:0),{labelX:n/2,labelY:d-l,textAnchor:"middle"}}}var I=["layout","minValue","maxValue","reverse","width","height","padding","innerPadding","valueScale","indexScale","hiddenIds"],R=function(e,a){return e>a},P=function(e,a){return e<a},E=function(e,a){return Array.from(" ".repeat(a-e),(function(a,t){return e+t}))},j=function(e){return R(e,0)?0:e},F=function(e,a,t,i){var n=e.data,r=e.formatValue,l=e.getColor,o=e.getIndex,d=e.getTooltipLabel,u=e.innerPadding,s=void 0===u?0:u,c=e.keys,h=e.xScale,v=e.yScale,b=e.margin,f=t?P:R,g=n.map(T),m=[];return c.forEach((function(e,t){return E(0,h.domain().length).forEach((function(u){var c,x,p,y=W(n[u][e]),k=y[0],S=y[1],C=o(n[u]),w=(null!=(c=h(C))?c:0)+a*t+s*t,L=f(x=S,0)?null!=(p=v(x))?p:0:i,V=function(e,a){var t;return f(e,0)?i-a:(null!=(t=v(e))?t:0)-i}(S,L),M={id:e,value:null===k?k:S,formattedValue:r(S),hidden:!1,index:u,indexValue:C,data:g[u]};m.push({key:e+"."+M.indexValue,index:m.length,data:M,x:w,y:L,absX:b.left+w,absY:b.top+L,width:a,height:V,color:l(M),label:d(M)})}))})),m},A=function(e,a,t,i){var n=e.data,r=e.formatValue,l=e.getIndex,o=e.getColor,d=e.getTooltipLabel,u=e.keys,s=e.innerPadding,c=void 0===s?0:s,h=e.xScale,v=e.yScale,b=e.margin,f=t?P:R,g=n.map(T),m=[];return u.forEach((function(e,t){return E(0,v.domain().length).forEach((function(u){var s,x,p,y=W(n[u][e]),k=y[0],S=y[1],C=l(n[u]),w=f(x=S,0)?i:null!=(p=h(x))?p:0,L=(null!=(s=v(C))?s:0)+a*t+c*t,V=function(e,a){var t;return f(e,0)?(null!=(t=h(e))?t:0)-i:i-a}(S,w),M={id:e,value:null===k?k:S,formattedValue:r(S),hidden:!1,index:u,indexValue:C,data:g[u]};m.push({key:e+"."+M.indexValue,index:m.length,data:M,x:w,y:L,absX:b.left+w,absY:b.top+L,width:V,height:a,color:o(M),label:d(M)})}))})),m},H=function(e){var a,t,i=e.layout,n=e.minValue,r=e.maxValue,l=e.reverse,o=e.width,d=e.height,u=e.padding,s=void 0===u?0:u,h=e.innerPadding,v=void 0===h?0:h,b=e.valueScale,m=e.indexScale,x=e.hiddenIds,p=void 0===x?[]:x,y=g(e,I),k=y.keys.filter((function(e){return!p.includes(e)})),S=B(y.data,k),C="vertical"===i?["y","x",o]:["x","y",d],w=C[0],L=C[1],V=C[2],T=M(S,y.getIndex,s,m,V,L),W=f({max:r,min:n,reverse:l},b),O="auto"===W.min?j:function(e){return e},R=S.reduce((function(e,a){return[].concat(e,k.map((function(e){return a[e]})))}),[]).filter(Boolean),P=O(Math.min.apply(Math,R)),E=(t=Math.max.apply(Math,R),isFinite(t)?t:0),H=c.computeScale(W,{all:R,min:P,max:E},"x"===w?o:d,w),D="vertical"===i?[T,H]:[H,T],X=D[0],Y=D[1],q=(T.bandwidth()-v*(k.length-1))/k.length,G=[f({},y,{data:S,keys:k,innerPadding:v,xScale:X,yScale:Y}),q,W.reverse,null!=(a=H(0))?a:0];return{xScale:X,yScale:Y,bars:q>0?"vertical"===i?F.apply(void 0,G):A.apply(void 0,G):[]}},D=["data","layout","minValue","maxValue","reverse","width","height","padding","valueScale","indexScale","hiddenIds"],X=function(e){var a;return e.some(Array.isArray)?X((a=[]).concat.apply(a,e)):e},Y=function(e,a,t){var i=e.formatValue,n=e.getColor,r=e.getIndex,l=e.getTooltipLabel,o=e.innerPadding,d=e.stackedData,u=e.xScale,s=e.yScale,c=e.margin,h=[];return d.forEach((function(e){return u.domain().forEach((function(d,v){var b,f,g=e[v],m=null!=(b=u(r(g.data)))?b:0,x=(null!=(f=function(e){return s(e[t?0:1])}(g))?f:0)+.5*o,p=function(e,a){var i;return(null!=(i=s(e[t?1:0]))?i:0)-a}(g,x)-o,y=W(g.data[e.key]),k=y[0],S=y[1],C={id:e.key,value:null===k?k:S,formattedValue:i(S),hidden:!1,index:v,indexValue:d,data:T(g.data)};h.push({key:e.key+"."+d,index:h.length,data:C,x:m,y:x,absX:c.left+m,absY:c.top+x,width:a,height:p,color:n(C),label:l(C)})}))})),h},q=function(e,a,t){var i=e.formatValue,n=e.getColor,r=e.getIndex,l=e.getTooltipLabel,o=e.innerPadding,d=e.stackedData,u=e.xScale,s=e.yScale,c=e.margin,h=[];return d.forEach((function(e){return s.domain().forEach((function(d,v){var b,f,g=e[v],m=null!=(b=s(r(g.data)))?b:0,x=(null!=(f=function(e){return u(e[t?1:0])}(g))?f:0)+.5*o,p=function(e,a){var i;return(null!=(i=u(e[t?0:1]))?i:0)-a}(g,x)-o,y=W(g.data[e.key]),k=y[0],S=y[1],C={id:e.key,value:null===k?k:S,formattedValue:i(S),hidden:!1,index:v,indexValue:d,data:T(g.data)};h.push({key:e.key+"."+d,index:h.length,data:C,x:x,y:m,absX:c.left+x,absY:c.top+m,width:p,height:a,color:n(C),label:l(C)})}))})),h},G=function(e){var a,t=e.data,i=e.layout,n=e.minValue,r=e.maxValue,l=e.reverse,o=e.width,d=e.height,u=e.padding,s=void 0===u?0:u,v=e.valueScale,b=e.indexScale,m=e.hiddenIds,x=void 0===m?[]:m,p=g(e,D),y=p.keys.filter((function(e){return!x.includes(e)})),k=h.stack().keys(y).offset(h.stackOffsetDiverging)(B(t,y)),S="vertical"===i?["y","x",o]:["x","y",d],C=S[0],w=S[1],L=S[2],V=M(t,p.getIndex,s,b,L,w),T=f({max:r,min:n,reverse:l},v),W=(a=X(k),"log"===v.type?a.filter((function(e){return 0!==e})):a),O=Math.min.apply(Math,W),I=Math.max.apply(Math,W),R=c.computeScale(T,{all:W,min:O,max:I},"x"===C?o:d,C),P="vertical"===i?[V,R]:[R,V],E=P[0],j=P[1],F=p.innerPadding>0?p.innerPadding:0,A=V.bandwidth(),H=[f({},p,{innerPadding:F,stackedData:k,xScale:E,yScale:j}),A,T.reverse];return{xScale:E,yScale:j,bars:A>0?"vertical"===i?Y.apply(void 0,H):q.apply(void 0,H):[]}},z=function(e){var t=e.bars,i=e.direction,n=e.from,r=e.groupMode,l=e.layout,o=e.legendLabel,d=e.reverse,u=a.getPropertyAccessor(null!=o?o:"indexes"===n?"indexValue":"id");return"indexes"===n?function(e,a,t){var i=v(e.map((function(e){var a,i;return{id:null!=(a=e.data.indexValue)?a:"",label:t(e.data),hidden:e.data.hidden,color:null!=(i=e.color)?i:"#000"}})),(function(e){return e.id}));return"horizontal"===a&&i.reverse(),i}(t,l,u):function(e,a,t,i,n,r){var l=v(e.map((function(e){var a;return{id:e.data.id,label:r(e.data),hidden:e.data.hidden,color:null!=(a=e.color)?a:"#000"}})),(function(e){return e.id}));return("vertical"===a&&"stacked"===i&&"column"===t&&!0!==n||"horizontal"===a&&"stacked"===i&&!0===n)&&l.reverse(),l}(t,l,i,r,d,u)},N=function(e,a,t){var i=e.get(a)||0;e.set(a,i+t)},K=function(e,a,t){var i=e.get(a)||0;e.set(a,i+(t>0?t:0))},_=function(e,a,t){var i=e.get(a)||0;e.set(a,Math.max(i,Number(t)))},J=function(e,a){var t=e.get(a)||0;e.set(a,t+1)},Q=function(e){var t=e.indexBy,n=void 0===t?w.indexBy:t,r=e.keys,l=void 0===r?w.keys:r,u=e.label,s=void 0===u?w.label:u,c=e.tooltipLabel,h=void 0===c?w.tooltipLabel:c,v=e.valueFormat,b=e.colors,g=void 0===b?w.colors:b,m=e.colorBy,x=void 0===m?w.colorBy:m,p=e.borderColor,y=void 0===p?w.borderColor:p,k=e.labelTextColor,S=void 0===k?w.labelTextColor:k,C=e.groupMode,L=void 0===C?w.groupMode:C,V=e.layout,M=void 0===V?w.layout:V,B=e.reverse,T=void 0===B?w.reverse:B,W=e.data,O=e.minValue,I=void 0===O?w.minValue:O,R=e.maxValue,P=void 0===R?w.maxValue:R,E=e.margin,j=e.width,F=e.height,A=e.padding,D=void 0===A?w.padding:A,X=e.innerPadding,Y=void 0===X?w.innerPadding:X,q=e.valueScale,Q=void 0===q?w.valueScale:q,U=e.indexScale,Z=void 0===U?w.indexScale:U,$=e.initialHiddenIds,ee=void 0===$?w.initialHiddenIds:$,ae=e.enableLabel,te=void 0===ae?w.enableLabel:ae,ie=e.labelSkipWidth,ne=void 0===ie?w.labelSkipWidth:ie,re=e.labelSkipHeight,le=void 0===re?w.labelSkipHeight:re,oe=e.legends,de=void 0===oe?w.legends:oe,ue=e.legendLabel,se=e.totalsOffset,ce=void 0===se?w.totalsOffset:se,he=i.useState(null!=ee?ee:[]),ve=he[0],be=he[1],fe=i.useCallback((function(e){be((function(a){return a.indexOf(e)>-1?a.filter((function(a){return a!==e})):[].concat(a,[e])}))}),[]),ge=a.usePropertyAccessor(n),me=a.usePropertyAccessor(s),xe=a.usePropertyAccessor(h),pe=a.useValueFormatter(v),ye=d.useTheme(),ke=o.useOrdinalColorScale(g,x),Se=o.useInheritedColor(y,ye),Ce=o.useInheritedColor(S,ye),we=("grouped"===L?H:G)({layout:M,reverse:T,data:W,getIndex:ge,keys:l,minValue:I,maxValue:P,width:j,height:F,getColor:ke,padding:D,innerPadding:Y,valueScale:Q,indexScale:Z,hiddenIds:ve,formatValue:pe,getTooltipLabel:xe,margin:E}),Le=we.bars,Ve=we.xScale,Me=we.yScale,Be=i.useMemo((function(){return Le.filter((function(e){return null!==e.data.value})).map((function(e,a){return f({},e,{index:a})}))}),[Le]),Te=i.useCallback((function(e){var a=e.width,t=e.height;return!!te&&(!(ne>0&&a<ne)&&!(le>0&&t<le))}),[te,ne,le]),We=i.useMemo((function(){return l.map((function(e){var a=Le.find((function(a){return a.data.id===e}));return f({},a,{data:f({id:e},null==a?void 0:a.data,{hidden:ve.includes(e)})})}))}),[ve,l,Le]),Oe=i.useMemo((function(){return de.map((function(e){return[e,z({bars:"keys"===e.dataFrom?We:Le,direction:e.direction,from:e.dataFrom,groupMode:L,layout:M,legendLabel:ue,reverse:T})]}))}),[de,We,Le,L,M,ue,T]),Ie=i.useMemo((function(){return function(e,a,t,i,n,r,l){void 0===i&&(i=w.layout),void 0===n&&(n=w.groupMode);var o=[];if(0===e.length)return o;var d=new Map,u=e[0].width,s=e[0].height;if("stacked"===n){var c=new Map;e.forEach((function(e){var a=e.data,t=a.indexValue,i=a.value;N(d,t,Number(i)),K(c,t,Number(i))})),c.forEach((function(e,n){var c,h,v,b=d.get(n)||0;"vertical"===i?(c=a(n),h=t(e),v=t(e/2)):(c=a(e),h=t(n),v=a(e/2)),c+="vertical"===i?u/2:r,h+="vertical"===i?-r:s/2,o.push({key:"total_"+n,x:c,y:h,value:b,formattedValue:l(b),animationOffset:v})}))}else if("grouped"===n){var h=new Map,v=new Map;e.forEach((function(e){var a=e.data,t=a.indexValue,i=a.value;N(d,t,Number(i)),_(h,t,Number(i)),J(v,t)})),h.forEach((function(e,n){var c,h,b,f=d.get(n)||0,g=v.get(n);"vertical"===i?(c=a(n),h=t(e),b=t(e/2)):(c=a(e),h=t(n),b=a(e/2)),c+="vertical"===i?g*u/2:r,h+="vertical"===i?-r:g*s/2,o.push({key:"total_"+n,x:c,y:h,value:f,formattedValue:l(f),animationOffset:b})}))}return o}(Le,Ve,Me,M,L,ce,pe)}),[Le,Ve,Me,M,L,ce,pe]);return{bars:Le,barsWithValue:Be,xScale:Ve,yScale:Me,getIndex:ge,getLabel:me,getTooltipLabel:xe,formatValue:pe,getColor:ke,getBorderColor:Se,getLabelColor:Ce,shouldRenderBarLabel:Te,hiddenIds:ve,toggleSerie:fe,legendsWithData:Oe,barTotals:Ie}},U=function(e){var a=e.data,i=e.springConfig,n=e.animate,l=e.layout,o=void 0===l?L.layout:l,u=d.useTheme();return t.useTransition(a,{keys:function(e){return e.key},from:function(e){return{x:"vertical"===o?e.x:e.animationOffset,y:"vertical"===o?e.animationOffset:e.y,labelOpacity:0}},enter:function(e){return{x:e.x,y:e.y,labelOpacity:1}},update:function(e){return{x:e.x,y:e.y,labelOpacity:1}},leave:function(e){return{x:"vertical"===o?e.x:e.animationOffset,y:"vertical"===o?e.animationOffset:e.y,labelOpacity:0}},config:i,immediate:!n,initial:n?void 0:null})((function(e,a){return r.jsx(t.animated.text,{x:e.x,y:e.y,fillOpacity:e.labelOpacity,style:f({},u.labels.text,{pointerEvents:"none"}),fontWeight:"bold",fontSize:u.labels.text.fontSize,fontFamily:u.labels.text.fontFamily,textAnchor:"vertical"===o?"middle":"start",alignmentBaseline:"vertical"===o?"alphabetic":"middle",children:a.formattedValue},a.key)}))},Z=["isInteractive","animate","motionConfig","theme","renderWrapper"],$=function(n){var l=n.data,o=n.indexBy,d=n.keys,u=n.margin,s=n.width,c=n.height,h=n.groupMode,v=n.layout,b=n.reverse,g=n.minValue,m=n.maxValue,y=n.valueScale,k=n.indexScale,S=n.padding,C=n.innerPadding,w=n.axisTop,V=n.axisRight,M=n.axisBottom,B=void 0===M?L.axisBottom:M,T=n.axisLeft,W=void 0===T?L.axisLeft:T,I=n.enableGridX,R=void 0===I?L.enableGridX:I,P=n.enableGridY,E=void 0===P?L.enableGridY:P,j=n.gridXValues,F=n.gridYValues,A=n.layers,H=void 0===A?L.layers:A,D=n.barComponent,X=void 0===D?L.barComponent:D,Y=n.enableLabel,q=void 0===Y?L.enableLabel:Y,G=n.label,z=n.labelSkipWidth,N=void 0===z?L.labelSkipWidth:z,K=n.labelSkipHeight,_=void 0===K?L.labelSkipHeight:K,J=n.labelTextColor,Z=n.labelPosition,$=void 0===Z?L.labelPosition:Z,ee=n.labelOffset,ae=void 0===ee?L.labelOffset:ee,te=n.markers,ie=void 0===te?L.markers:te,ne=n.colorBy,re=n.colors,le=n.defs,oe=void 0===le?L.defs:le,de=n.fill,ue=void 0===de?L.fill:de,se=n.borderRadius,ce=void 0===se?L.borderRadius:se,he=n.borderWidth,ve=void 0===he?L.borderWidth:he,be=n.borderColor,fe=n.annotations,ge=void 0===fe?L.annotations:fe,me=n.legendLabel,xe=n.tooltipLabel,pe=n.valueFormat,ye=n.isInteractive,ke=void 0===ye?L.isInteractive:ye,Se=n.tooltip,Ce=void 0===Se?L.tooltip:Se,we=n.onClick,Le=n.onMouseEnter,Ve=n.onMouseLeave,Me=n.legends,Be=n.role,Te=void 0===Be?L.role:Be,We=n.ariaLabel,Oe=n.ariaLabelledBy,Ie=n.ariaDescribedBy,Re=n.isFocusable,Pe=void 0===Re?L.isFocusable:Re,Ee=n.barAriaLabel,je=n.barAriaLabelledBy,Fe=n.barAriaDescribedBy,Ae=n.barAriaHidden,He=n.barAriaDisabled,De=n.initialHiddenIds,Xe=n.enableTotals,Ye=void 0===Xe?L.enableTotals:Xe,qe=n.totalsOffset,Ge=void 0===qe?L.totalsOffset:qe,ze=a.useMotionConfig(),Ne=ze.animate,Ke=ze.config,_e=a.useDimensions(s,c,u),Je=_e.outerWidth,Qe=_e.outerHeight,Ue=_e.margin,Ze=_e.innerWidth,$e=_e.innerHeight,ea=Q({indexBy:o,label:G,tooltipLabel:xe,valueFormat:pe,colors:re,colorBy:ne,borderColor:be,labelTextColor:J,groupMode:h,layout:v,reverse:b,data:l,keys:d,minValue:g,maxValue:m,margin:Ue,width:Ze,height:$e,padding:S,innerPadding:C,valueScale:y,indexScale:k,enableLabel:q,labelSkipWidth:N,labelSkipHeight:_,legends:Me,legendLabel:me,initialHiddenIds:De,totalsOffset:Ge}),aa=ea.bars,ta=ea.barsWithValue,ia=ea.xScale,na=ea.yScale,ra=ea.getLabel,la=ea.getTooltipLabel,oa=ea.getBorderColor,da=ea.getLabelColor,ua=ea.shouldRenderBarLabel,sa=ea.toggleSerie,ca=ea.legendsWithData,ha=ea.barTotals,va=ea.getColor,ba=O(v,b,$,ae),fa=t.useTransition(ta,{keys:function(e){return e.key},from:function(e){return f({borderColor:oa(e),color:e.color,height:0,labelColor:da(e),labelOpacity:0},ba(e.width,e.height),{transform:"translate("+e.x+", "+(e.y+e.height)+")",width:e.width},"vertical"===v?{}:{height:e.height,transform:"translate("+e.x+", "+e.y+")",width:0})},enter:function(e){return f({borderColor:oa(e),color:e.color,height:e.height,labelColor:da(e),labelOpacity:1},ba(e.width,e.height),{transform:"translate("+e.x+", "+e.y+")",width:e.width})},update:function(e){return f({borderColor:oa(e),color:e.color,height:e.height,labelColor:da(e),labelOpacity:1},ba(e.width,e.height),{transform:"translate("+e.x+", "+e.y+")",width:e.width})},leave:function(e){return f({borderColor:oa(e),color:e.color,height:0,labelColor:da(e),labelOpacity:0},ba(e.width,e.height),{labelY:0,transform:"translate("+e.x+", "+(e.y+e.height)+")",width:e.width},"vertical"===v?{}:f({},ba(e.width,e.height),{labelX:0,height:e.height,transform:"translate("+e.x+", "+e.y+")",width:0}))},config:Ke,immediate:!Ne,initial:Ne?void 0:null}),ga=i.useMemo((function(){return{borderRadius:ce,borderWidth:ve,enableLabel:q,isInteractive:ke,labelSkipWidth:N,labelSkipHeight:_,onClick:we,onMouseEnter:Le,onMouseLeave:Ve,getTooltipLabel:la,tooltip:Ce,isFocusable:Pe,ariaLabel:Ee,ariaLabelledBy:je,ariaDescribedBy:Fe,ariaHidden:Ae,ariaDisabled:He}}),[ce,ve,q,la,ke,_,N,we,Le,Ve,Ce,Pe,Ee,je,Fe,Ae,He]),ma=a.bindDefs(oe,aa,ue,{dataKey:"data",targetKey:"data.fill"}),xa={annotations:null,axes:null,bars:null,grid:null,legends:null,markers:null,totals:null};H.includes("annotations")&&(xa.annotations=r.jsx(x,{bars:aa,annotations:ge},"annotations")),H.includes("axes")&&(xa.axes=r.jsx(e.Axes,{xScale:ia,yScale:na,width:Ze,height:$e,top:w,right:V,bottom:B,left:W},"axes")),H.includes("bars")&&(xa.bars=r.jsx(i.Fragment,{children:fa((function(e,a){return i.createElement(X,f({},ga,{bar:a,style:e,shouldRenderLabel:ua(a),label:ra(a.data)}))}))},"bars")),H.includes("grid")&&(xa.grid=r.jsx(e.Grid,{width:Ze,height:$e,xScale:R?ia:null,yScale:E?na:null,xValues:j,yValues:F},"grid")),H.includes("legends")&&(xa.legends=r.jsx(p,{width:Ze,height:$e,legends:ca,toggleSerie:sa},"legends")),H.includes("markers")&&(xa.markers=r.jsx(a.CartesianMarkers,{markers:ie,width:Ze,height:$e,xScale:ia,yScale:na},"markers")),H.includes("totals")&&Ye&&(xa.totals=r.jsx(U,{data:ha,springConfig:Ke,animate:Ne,layout:v},"totals"));var pa=i.useMemo((function(){return f({},ga,{margin:Ue,width:s,height:c,innerWidth:Ze,innerHeight:$e,bars:aa,legendData:ca,enableLabel:q,xScale:ia,yScale:na,tooltip:Ce,getTooltipLabel:la,onClick:we,onMouseEnter:Le,onMouseLeave:Ve,getColor:va})}),[ga,Ue,s,c,Ze,$e,aa,ca,q,ia,na,Ce,la,we,Le,Ve,va]);return r.jsx(a.SvgWrapper,{width:Je,height:Qe,margin:Ue,defs:ma,role:Te,ariaLabel:We,ariaLabelledBy:Oe,ariaDescribedBy:Ie,isFocusable:Pe,children:H.map((function(e,a){var t;return"function"==typeof e?r.jsx(i.Fragment,{children:i.createElement(e,pa)},a):null!=(t=null==xa?void 0:xa[e])?t:null}))})},ee=function(e){var t=e.isInteractive,i=void 0===t?L.isInteractive:t,n=e.animate,l=void 0===n?L.animate:n,o=e.motionConfig,d=void 0===o?L.motionConfig:o,u=e.theme,s=e.renderWrapper,c=g(e,Z);return r.jsx(a.Container,{animate:l,isInteractive:i,motionConfig:d,renderWrapper:s,theme:u,children:r.jsx($,f({isInteractive:i},c))})},ae=["isInteractive","renderWrapper","theme"],te=function(e,t,i,n){return e.find((function(e){return a.isCursorInRect(e.x+t.left,e.y+t.top,e.width,e.height,i,n)}))};var ie=function(t){var o=t.data,c=t.indexBy,h=t.keys,v=t.margin,g=t.width,m=t.height,x=t.groupMode,p=t.layout,y=t.reverse,k=t.minValue,S=t.maxValue,C=t.valueScale,w=t.indexScale,L=t.padding,M=t.innerPadding,B=t.axisTop,T=t.axisRight,W=t.axisBottom,I=void 0===W?V.axisBottom:W,R=t.axisLeft,P=void 0===R?V.axisLeft:R,E=t.enableGridX,j=void 0===E?V.enableGridX:E,F=t.enableGridY,A=void 0===F?V.enableGridY:F,H=t.gridXValues,D=t.gridYValues,X=t.labelPosition,Y=void 0===X?V.labelPosition:X,q=t.labelOffset,G=void 0===q?V.labelOffset:q,z=t.layers,N=void 0===z?V.layers:z,K=t.renderBar,_=void 0===K?function(e,a){var t=a.bar,i=t.color,n=t.height,r=t.width,l=t.x,o=t.y,d=a.borderColor,u=a.borderRadius,c=a.borderWidth,h=a.label,v=a.shouldRenderLabel,f=a.labelStyle,g=a.labelX,m=a.labelY,x=a.textAnchor;e.fillStyle=i,c>0&&(e.strokeStyle=d,e.lineWidth=c),e.beginPath(),b.roundedRect(e,l,o,r,n,Math.min(u,n)),e.fill(),c>0&&e.stroke(),v&&(e.textBaseline="middle",e.textAlign="middle"===x?"center":x,s.drawCanvasText(e,f,h,l+g,o+m))}:K,J=t.enableLabel,U=void 0===J?V.enableLabel:J,Z=t.label,$=t.labelSkipWidth,ee=void 0===$?V.labelSkipWidth:$,ae=t.labelSkipHeight,ie=void 0===ae?V.labelSkipHeight:ae,ne=t.labelTextColor,re=t.colorBy,le=t.colors,oe=t.borderRadius,de=void 0===oe?V.borderRadius:oe,ue=t.borderWidth,se=void 0===ue?V.borderWidth:ue,ce=t.borderColor,he=t.annotations,ve=void 0===he?V.annotations:he,be=t.legendLabel,fe=t.tooltipLabel,ge=t.valueFormat,me=t.isInteractive,xe=void 0===me?V.isInteractive:me,pe=t.tooltip,ye=void 0===pe?V.tooltip:pe,ke=t.onClick,Se=t.onMouseEnter,Ce=t.onMouseLeave,we=t.legends,Le=t.pixelRatio,Ve=void 0===Le?V.pixelRatio:Le,Me=t.canvasRef,Be=t.enableTotals,Te=void 0===Be?V.enableTotals:Be,We=t.totalsOffset,Oe=void 0===We?V.totalsOffset:We,Ie=i.useRef(null),Re=d.useTheme(),Pe=a.useDimensions(g,m,v),Ee=Pe.margin,je=Pe.innerWidth,Fe=Pe.innerHeight,Ae=Pe.outerWidth,He=Pe.outerHeight,De=Q({indexBy:c,label:Z,tooltipLabel:fe,valueFormat:ge,colors:le,colorBy:re,borderColor:ce,labelTextColor:ne,groupMode:x,layout:p,reverse:y,data:o,keys:h,minValue:k,maxValue:S,margin:Ee,width:je,height:Fe,padding:L,innerPadding:M,valueScale:C,indexScale:w,enableLabel:U,labelSkipWidth:ee,labelSkipHeight:ie,legends:we,legendLabel:be,totalsOffset:Oe}),Xe=De.bars,Ye=De.barsWithValue,qe=De.xScale,Ge=De.yScale,ze=De.getLabel,Ne=De.getTooltipLabel,Ke=De.getBorderColor,_e=De.getLabelColor,Je=De.shouldRenderBarLabel,Qe=De.legendsWithData,Ue=De.barTotals,Ze=De.getColor,$e=u.useTooltip(),ea=$e.showTooltipFromEvent,aa=$e.hideTooltip,ta=n.useComputedAnnotations({annotations:n.useAnnotations({data:Xe,annotations:ve,getPosition:function(e){return{x:e.x,y:e.y}},getDimensions:function(e){var a=e.width,t=e.height;return{width:a,height:t,size:Math.max(a,t)}}})}),ia=i.useMemo((function(){return{borderRadius:de,borderWidth:se,isInteractive:xe,isFocusable:!1,labelSkipWidth:ee,labelSkipHeight:ie,margin:Ee,width:g,height:m,innerWidth:je,innerHeight:Fe,bars:Xe,legendData:Qe,enableLabel:U,xScale:qe,yScale:Ge,tooltip:ye,getTooltipLabel:Ne,onClick:ke,onMouseEnter:Se,onMouseLeave:Ce,getColor:Ze}}),[de,se,xe,ee,ie,Ee,g,m,je,Fe,Xe,Qe,U,qe,Ge,ye,Ne,ke,Se,Ce,Ze]),na=a.useValueFormatter(ge),ra=O(p,y,Y,G);i.useEffect((function(){var a,t=null==(a=Ie.current)?void 0:a.getContext("2d");Ie.current&&t&&(Ie.current.width=Ae*Ve,Ie.current.height=He*Ve,t.scale(Ve,Ve),t.fillStyle=Re.background,t.fillRect(0,0,Ae,He),t.translate(Ee.left,Ee.top),N.forEach((function(a){"grid"===a?"number"==typeof Re.grid.line.strokeWidth&&Re.grid.line.strokeWidth>0&&(t.lineWidth=Re.grid.line.strokeWidth,t.strokeStyle=Re.grid.line.stroke,j&&e.renderGridLinesToCanvas(t,{width:je,height:Fe,scale:qe,axis:"x",values:H}),A&&e.renderGridLinesToCanvas(t,{width:je,height:Fe,scale:Ge,axis:"y",values:D})):"axes"===a?e.renderAxesToCanvas(t,{xScale:qe,yScale:Ge,width:je,height:Fe,top:B,right:T,bottom:I,left:P,theme:Re}):"bars"===a?(s.setCanvasFont(t,Re.text),Ye.forEach((function(e){_(t,f({bar:e,borderColor:Ke(e),borderRadius:de,borderWidth:se,label:ze(e.data),shouldRenderLabel:Je(e),labelStyle:f({},Re.labels.text,{fill:_e(e)})},ra(e.width,e.height)))}))):"legends"===a?Qe.forEach((function(e){var a=e[0],i=e[1];l.renderLegendToCanvas(t,f({},a,{data:i,containerWidth:je,containerHeight:Fe,theme:Re}))})):"annotations"===a?n.renderAnnotationsToCanvas(t,{annotations:ta,theme:Re}):"totals"===a&&Te?function(e,a,t,i){void 0===i&&(i=V.layout),s.setCanvasFont(e,t.labels.text),e.textBaseline="vertical"===i?"alphabetic":"middle",e.textAlign="vertical"===i?"center":"start",a.forEach((function(a){s.drawCanvasText(e,t.labels.text,a.formattedValue,a.x,a.y)}))}(t,Ue,Re,p):"function"==typeof a&&a(t,ia)})),t.save())}),[I,P,T,B,Ye,de,se,ta,j,A,Ke,ze,_e,H,D,x,m,Fe,je,ia,N,p,Qe,Ee.left,Ee.top,He,Ae,Ve,_,qe,Ge,y,Je,Re,g,Ue,Te,na,ra]);var la=i.useCallback((function(e){if(Xe&&Ie.current){var t=a.getRelativeCursor(Ie.current,e),n=t[0],r=t[1],l=te(Xe,Ee,n,r);void 0!==l?(ea(i.createElement(ye,f({},l.data,{color:l.color,label:l.label,value:Number(l.data.value)})),e),"mouseenter"===e.type&&(null==Se||Se(l.data,e))):aa()}}),[aa,Ee,Se,Xe,ea,ye]),oa=i.useCallback((function(e){if(Xe&&Ie.current){aa();var t=a.getRelativeCursor(Ie.current,e),i=t[0],n=t[1],r=te(Xe,Ee,i,n);r&&(null==Ce||Ce(r.data,e))}}),[aa,Ee,Ce,Xe]),da=i.useCallback((function(e){if(Xe&&Ie.current){var t=a.getRelativeCursor(Ie.current,e),i=t[0],n=t[1],r=te(Xe,Ee,i,n);void 0!==r&&(null==ke||ke(f({},r.data,{color:r.color}),e))}}),[Ee,ke,Xe]);return r.jsx("canvas",{ref:function(e){Ie.current=e,Me&&"current"in Me&&(Me.current=e)},width:Ae*Ve,height:He*Ve,style:{width:Ae,height:He,cursor:xe?"auto":"normal"},onMouseEnter:xe?la:void 0,onMouseMove:xe?la:void 0,onMouseLeave:xe?oa:void 0,onClick:xe?da:void 0})},ne=i.forwardRef((function(e,t){var i=e.isInteractive,n=e.renderWrapper,l=e.theme,o=g(e,ae);return r.jsx(a.Container,{isInteractive:i,renderWrapper:n,theme:l,animate:!1,children:r.jsx(ie,f({},o,{canvasRef:t}))})})),re=i.forwardRef((function(e,t){return r.jsx(a.ResponsiveWrapper,{children:function(a){var i=a.width,n=a.height;return r.jsx(ne,f({width:i,height:n},e,{ref:t}))}})}));exports.Bar=ee,exports.BarCanvas=ne,exports.BarItem=k,exports.BarTooltip=C,exports.BarTotals=U,exports.ResponsiveBar=function(e){return r.jsx(a.ResponsiveWrapper,{children:function(a){var t=a.width,i=a.height;return r.jsx(ee,f({width:t,height:i},e))}})},exports.ResponsiveBarCanvas=re,exports.canvasDefaultProps=V,exports.defaultProps=w,exports.svgDefaultProps=L;
//# sourceMappingURL=nivo-bar.cjs.js.map
