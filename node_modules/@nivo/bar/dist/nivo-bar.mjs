import{Axes as e,Grid as t,renderGridLinesToCanvas as a,renderAxesToCanvas as i}from"@nivo/axes";import{getPropertyAccessor as n,usePropertyAccessor as r,useValueFormatter as l,Container as o,useMotionConfig as d,useDimensions as u,bindDefs as s,CartesianMarkers as c,SvgWrapper as h,getRelativeCursor as f,isCursorInRect as b,ResponsiveWrapper as v}from"@nivo/core";import{animated as g,to as m,useTransition as p}from"@react-spring/web";import{useMemo as x,createElement as y,useCallback as S,useState as k,Fragment as w,forwardRef as L,useRef as C,useEffect as V}from"react";import{useAnnotations as M,Annotation as W,useComputedAnnotations as B,renderAnnotationsToCanvas as O}from"@nivo/annotations";import{jsx as I,Fragment as T,jsxs as P}from"react/jsx-runtime";import{BoxLegendSvg as E,renderLegendToCanvas as H}from"@nivo/legends";import{useOrdinalColorScale as R,useInheritedColor as F}from"@nivo/colors";import{useTheme as D}from"@nivo/theming";import{useTooltip as A,BasicTooltip as X}from"@nivo/tooltip";import{Text as Y,setCanvasFont as G,drawCanvasText as z}from"@nivo/text";import{computeScale as N}from"@nivo/scales";import{stack as j,stackOffsetDiverging as K}from"d3-shape";import _ from"lodash/uniqBy.js";import{roundedRect as q}from"@nivo/canvas";function J(){return J=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)({}).hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},J.apply(null,arguments)}function Q(e,t){if(null==e)return{};var a={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;a[i]=e[i]}return a}var U,Z=function(e){var t=e.bars,a=e.annotations,i=M({data:t,annotations:a,getPosition:function(e){return{x:e.x+e.width/2,y:e.y+e.height/2}},getDimensions:function(e){var t=e.height,a=e.width;return{width:a,height:t,size:Math.max(a,t)}}});return I(T,{children:i.map((function(e,t){return I(W,J({},e),t)}))})},$=function(e){var t=e.width,a=e.height,i=e.legends,n=e.toggleSerie;return I(T,{children:i.map((function(e,i){var r,l=e[0],o=e[1];return I(E,J({},l,{containerWidth:t,containerHeight:a,data:null!=(r=l.data)?r:o,toggleSerie:l.toggleSerie&&"keys"===l.dataFrom?n:void 0}),i)}))})},ee=["data"],te=function(e){var t,a=e.bar,i=a.data,n=Q(a,ee),r=e.style,l=r.borderColor,o=r.color,d=r.height,u=r.labelColor,s=r.labelOpacity,c=r.labelX,h=r.labelY,f=r.transform,b=r.width,v=r.textAnchor,p=e.borderRadius,k=e.borderWidth,w=e.label,L=e.shouldRenderLabel,C=e.isInteractive,V=e.onClick,M=e.onMouseEnter,W=e.onMouseLeave,B=e.tooltip,O=e.isFocusable,T=e.ariaLabel,E=e.ariaLabelledBy,H=e.ariaDescribedBy,R=e.ariaDisabled,F=e.ariaHidden,X=D(),G=A(),z=G.showTooltipFromEvent,N=G.showTooltipAt,j=G.hideTooltip,K=x((function(){return function(){return y(B,J({},n,i))}}),[B,n,i]),_=S((function(e){null==V||V(J({color:n.color},i),e)}),[n,i,V]),q=S((function(e){return z(K(),e)}),[z,K]),U=S((function(e){null==M||M(i,e),z(K(),e)}),[i,M,z,K]),Z=S((function(e){null==W||W(i,e),j()}),[i,j,W]),$=S((function(){N(K(),[n.absX+n.width/2,n.absY])}),[N,K,n]),te=S((function(){j()}),[j]);return P(g.g,{transform:f,children:[I(g.rect,{width:m(b,(function(e){return Math.max(e,0)})),height:m(d,(function(e){return Math.max(e,0)})),rx:p,ry:p,fill:null!=(t=i.fill)?t:o,strokeWidth:k,stroke:l,focusable:O,tabIndex:O?0:void 0,"aria-label":T?T(i):void 0,"aria-labelledby":E?E(i):void 0,"aria-describedby":H?H(i):void 0,"aria-disabled":R?R(i):void 0,"aria-hidden":F?F(i):void 0,onMouseEnter:C?U:void 0,onMouseMove:C?q:void 0,onMouseLeave:C?Z:void 0,onClick:C?_:void 0,onFocus:C&&O?$:void 0,onBlur:C&&O?te:void 0,"data-testid":"bar.item."+i.id+"."+i.index}),L&&I(Y,{x:c,y:h,textAnchor:v,dominantBaseline:"central",fillOpacity:s,style:J({},X.labels.text,{pointerEvents:"none",fill:u}),children:w})]})},ae=["color","label"],ie=function(e){var t=e.color,a=e.label,i=Q(e,ae);return I(X,{id:a,value:i.formattedValue,enableChip:!0,color:t})},ne={indexBy:"id",keys:["value"],groupMode:"stacked",layout:"vertical",reverse:!1,minValue:"auto",maxValue:"auto",valueScale:{type:"linear"},indexScale:{type:"band",round:!0},padding:.1,innerPadding:0,axisBottom:{},axisLeft:{},enableGridX:!1,enableGridY:!0,enableLabel:!0,label:"formattedValue",labelPosition:"middle",labelOffset:0,labelSkipWidth:0,labelSkipHeight:0,labelTextColor:{from:"theme",theme:"labels.text.fill"},colorBy:"id",colors:{scheme:"nivo"},borderRadius:0,borderWidth:0,borderColor:{from:"color"},isInteractive:!0,tooltip:ie,tooltipLabel:function(e){return e.id+" - "+e.indexValue},legends:[],initialHiddenIds:[],annotations:[],markers:[],enableTotals:!1,totalsOffset:10},re=J({},ne,{layers:["grid","axes","bars","totals","markers","legends","annotations"],barComponent:te,defs:[],fill:[],animate:!0,motionConfig:"default",role:"img",isFocusable:!1}),le=J({},ne,{layers:["grid","axes","bars","totals","legends","annotations"],pixelRatio:"undefined"!=typeof window&&null!=(U=window.devicePixelRatio)?U:1}),oe=function(e,t,a,i,n,r){return N(i,{all:e.map(t),min:0,max:0},n,r).padding(a)},de=function(e,t){return e.map((function(e){return J({},t.reduce((function(e,t){return e[t]=null,e}),{}),e)}))},ue=function(e){return Object.keys(e).reduce((function(t,a){return e[a]&&(t[a]=e[a]),t}),{})},se=function(e){return[e,Number(e)]};function ce(e,t,a,i){return void 0===e&&(e=ne.layout),void 0===t&&(t=ne.reverse),void 0===a&&(a=ne.labelPosition),void 0===i&&(i=ne.labelOffset),function(n,r){var l=i*(t?-1:1);if("horizontal"===e){var o=n/2;return"start"===a?o=t?n:0:"end"===a&&(o=t?0:n),{labelX:o+l,labelY:r/2,textAnchor:"middle"===a?"middle":t?"end":"start"}}var d=r/2;return"start"===a?d=t?0:r:"end"===a&&(d=t?r:0),{labelX:n/2,labelY:d-l,textAnchor:"middle"}}}var he=["layout","minValue","maxValue","reverse","width","height","padding","innerPadding","valueScale","indexScale","hiddenIds"],fe=function(e,t){return e>t},be=function(e,t){return e<t},ve=function(e,t){return Array.from(" ".repeat(t-e),(function(t,a){return e+a}))},ge=function(e){return fe(e,0)?0:e},me=function(e,t,a,i){var n=e.data,r=e.formatValue,l=e.getColor,o=e.getIndex,d=e.getTooltipLabel,u=e.innerPadding,s=void 0===u?0:u,c=e.keys,h=e.xScale,f=e.yScale,b=e.margin,v=a?be:fe,g=n.map(ue),m=[];return c.forEach((function(e,a){return ve(0,h.domain().length).forEach((function(u){var c,p,x,y=se(n[u][e]),S=y[0],k=y[1],w=o(n[u]),L=(null!=(c=h(w))?c:0)+t*a+s*a,C=v(p=k,0)?null!=(x=f(p))?x:0:i,V=function(e,t){var a;return v(e,0)?i-t:(null!=(a=f(e))?a:0)-i}(k,C),M={id:e,value:null===S?S:k,formattedValue:r(k),hidden:!1,index:u,indexValue:w,data:g[u]};m.push({key:e+"."+M.indexValue,index:m.length,data:M,x:L,y:C,absX:b.left+L,absY:b.top+C,width:t,height:V,color:l(M),label:d(M)})}))})),m},pe=function(e,t,a,i){var n=e.data,r=e.formatValue,l=e.getIndex,o=e.getColor,d=e.getTooltipLabel,u=e.keys,s=e.innerPadding,c=void 0===s?0:s,h=e.xScale,f=e.yScale,b=e.margin,v=a?be:fe,g=n.map(ue),m=[];return u.forEach((function(e,a){return ve(0,f.domain().length).forEach((function(u){var s,p,x,y=se(n[u][e]),S=y[0],k=y[1],w=l(n[u]),L=v(p=k,0)?i:null!=(x=h(p))?x:0,C=(null!=(s=f(w))?s:0)+t*a+c*a,V=function(e,t){var a;return v(e,0)?(null!=(a=h(e))?a:0)-i:i-t}(k,L),M={id:e,value:null===S?S:k,formattedValue:r(k),hidden:!1,index:u,indexValue:w,data:g[u]};m.push({key:e+"."+M.indexValue,index:m.length,data:M,x:L,y:C,absX:b.left+L,absY:b.top+C,width:V,height:t,color:o(M),label:d(M)})}))})),m},xe=function(e){var t,a,i=e.layout,n=e.minValue,r=e.maxValue,l=e.reverse,o=e.width,d=e.height,u=e.padding,s=void 0===u?0:u,c=e.innerPadding,h=void 0===c?0:c,f=e.valueScale,b=e.indexScale,v=e.hiddenIds,g=void 0===v?[]:v,m=Q(e,he),p=m.keys.filter((function(e){return!g.includes(e)})),x=de(m.data,p),y="vertical"===i?["y","x",o]:["x","y",d],S=y[0],k=y[1],w=y[2],L=oe(x,m.getIndex,s,b,w,k),C=J({max:r,min:n,reverse:l},f),V="auto"===C.min?ge:function(e){return e},M=x.reduce((function(e,t){return[].concat(e,p.map((function(e){return t[e]})))}),[]).filter(Boolean),W=V(Math.min.apply(Math,M)),B=(a=Math.max.apply(Math,M),isFinite(a)?a:0),O=N(C,{all:M,min:W,max:B},"x"===S?o:d,S),I="vertical"===i?[L,O]:[O,L],T=I[0],P=I[1],E=(L.bandwidth()-h*(p.length-1))/p.length,H=[J({},m,{data:x,keys:p,innerPadding:h,xScale:T,yScale:P}),E,C.reverse,null!=(t=O(0))?t:0];return{xScale:T,yScale:P,bars:E>0?"vertical"===i?me.apply(void 0,H):pe.apply(void 0,H):[]}},ye=["data","layout","minValue","maxValue","reverse","width","height","padding","valueScale","indexScale","hiddenIds"],Se=function(e){var t;return e.some(Array.isArray)?Se((t=[]).concat.apply(t,e)):e},ke=function(e,t,a){var i=e.formatValue,n=e.getColor,r=e.getIndex,l=e.getTooltipLabel,o=e.innerPadding,d=e.stackedData,u=e.xScale,s=e.yScale,c=e.margin,h=[];return d.forEach((function(e){return u.domain().forEach((function(d,f){var b,v,g=e[f],m=null!=(b=u(r(g.data)))?b:0,p=(null!=(v=function(e){return s(e[a?0:1])}(g))?v:0)+.5*o,x=function(e,t){var i;return(null!=(i=s(e[a?1:0]))?i:0)-t}(g,p)-o,y=se(g.data[e.key]),S=y[0],k=y[1],w={id:e.key,value:null===S?S:k,formattedValue:i(k),hidden:!1,index:f,indexValue:d,data:ue(g.data)};h.push({key:e.key+"."+d,index:h.length,data:w,x:m,y:p,absX:c.left+m,absY:c.top+p,width:t,height:x,color:n(w),label:l(w)})}))})),h},we=function(e,t,a){var i=e.formatValue,n=e.getColor,r=e.getIndex,l=e.getTooltipLabel,o=e.innerPadding,d=e.stackedData,u=e.xScale,s=e.yScale,c=e.margin,h=[];return d.forEach((function(e){return s.domain().forEach((function(d,f){var b,v,g=e[f],m=null!=(b=s(r(g.data)))?b:0,p=(null!=(v=function(e){return u(e[a?1:0])}(g))?v:0)+.5*o,x=function(e,t){var i;return(null!=(i=u(e[a?0:1]))?i:0)-t}(g,p)-o,y=se(g.data[e.key]),S=y[0],k=y[1],w={id:e.key,value:null===S?S:k,formattedValue:i(k),hidden:!1,index:f,indexValue:d,data:ue(g.data)};h.push({key:e.key+"."+d,index:h.length,data:w,x:p,y:m,absX:c.left+p,absY:c.top+m,width:x,height:t,color:n(w),label:l(w)})}))})),h},Le=function(e){var t,a=e.data,i=e.layout,n=e.minValue,r=e.maxValue,l=e.reverse,o=e.width,d=e.height,u=e.padding,s=void 0===u?0:u,c=e.valueScale,h=e.indexScale,f=e.hiddenIds,b=void 0===f?[]:f,v=Q(e,ye),g=v.keys.filter((function(e){return!b.includes(e)})),m=j().keys(g).offset(K)(de(a,g)),p="vertical"===i?["y","x",o]:["x","y",d],x=p[0],y=p[1],S=p[2],k=oe(a,v.getIndex,s,h,S,y),w=J({max:r,min:n,reverse:l},c),L=(t=Se(m),"log"===c.type?t.filter((function(e){return 0!==e})):t),C=Math.min.apply(Math,L),V=Math.max.apply(Math,L),M=N(w,{all:L,min:C,max:V},"x"===x?o:d,x),W="vertical"===i?[k,M]:[M,k],B=W[0],O=W[1],I=v.innerPadding>0?v.innerPadding:0,T=k.bandwidth(),P=[J({},v,{innerPadding:I,stackedData:m,xScale:B,yScale:O}),T,w.reverse];return{xScale:B,yScale:O,bars:T>0?"vertical"===i?ke.apply(void 0,P):we.apply(void 0,P):[]}},Ce=function(e){var t=e.bars,a=e.direction,i=e.from,r=e.groupMode,l=e.layout,o=e.legendLabel,d=e.reverse,u=n(null!=o?o:"indexes"===i?"indexValue":"id");return"indexes"===i?function(e,t,a){var i=_(e.map((function(e){var t,i;return{id:null!=(t=e.data.indexValue)?t:"",label:a(e.data),hidden:e.data.hidden,color:null!=(i=e.color)?i:"#000"}})),(function(e){return e.id}));return"horizontal"===t&&i.reverse(),i}(t,l,u):function(e,t,a,i,n,r){var l=_(e.map((function(e){var t;return{id:e.data.id,label:r(e.data),hidden:e.data.hidden,color:null!=(t=e.color)?t:"#000"}})),(function(e){return e.id}));return("vertical"===t&&"stacked"===i&&"column"===a&&!0!==n||"horizontal"===t&&"stacked"===i&&!0===n)&&l.reverse(),l}(t,l,a,r,d,u)},Ve=function(e,t,a){var i=e.get(t)||0;e.set(t,i+a)},Me=function(e,t,a){var i=e.get(t)||0;e.set(t,i+(a>0?a:0))},We=function(e,t,a){var i=e.get(t)||0;e.set(t,Math.max(i,Number(a)))},Be=function(e,t){var a=e.get(t)||0;e.set(t,a+1)},Oe=function(e){var t=e.indexBy,a=void 0===t?ne.indexBy:t,i=e.keys,n=void 0===i?ne.keys:i,o=e.label,d=void 0===o?ne.label:o,u=e.tooltipLabel,s=void 0===u?ne.tooltipLabel:u,c=e.valueFormat,h=e.colors,f=void 0===h?ne.colors:h,b=e.colorBy,v=void 0===b?ne.colorBy:b,g=e.borderColor,m=void 0===g?ne.borderColor:g,p=e.labelTextColor,y=void 0===p?ne.labelTextColor:p,w=e.groupMode,L=void 0===w?ne.groupMode:w,C=e.layout,V=void 0===C?ne.layout:C,M=e.reverse,W=void 0===M?ne.reverse:M,B=e.data,O=e.minValue,I=void 0===O?ne.minValue:O,T=e.maxValue,P=void 0===T?ne.maxValue:T,E=e.margin,H=e.width,A=e.height,X=e.padding,Y=void 0===X?ne.padding:X,G=e.innerPadding,z=void 0===G?ne.innerPadding:G,N=e.valueScale,j=void 0===N?ne.valueScale:N,K=e.indexScale,_=void 0===K?ne.indexScale:K,q=e.initialHiddenIds,Q=void 0===q?ne.initialHiddenIds:q,U=e.enableLabel,Z=void 0===U?ne.enableLabel:U,$=e.labelSkipWidth,ee=void 0===$?ne.labelSkipWidth:$,te=e.labelSkipHeight,ae=void 0===te?ne.labelSkipHeight:te,ie=e.legends,re=void 0===ie?ne.legends:ie,le=e.legendLabel,oe=e.totalsOffset,de=void 0===oe?ne.totalsOffset:oe,ue=k(null!=Q?Q:[]),se=ue[0],ce=ue[1],he=S((function(e){ce((function(t){return t.indexOf(e)>-1?t.filter((function(t){return t!==e})):[].concat(t,[e])}))}),[]),fe=r(a),be=r(d),ve=r(s),ge=l(c),me=D(),pe=R(f,v),ye=F(m,me),Se=F(y,me),ke=("grouped"===L?xe:Le)({layout:V,reverse:W,data:B,getIndex:fe,keys:n,minValue:I,maxValue:P,width:H,height:A,getColor:pe,padding:Y,innerPadding:z,valueScale:j,indexScale:_,hiddenIds:se,formatValue:ge,getTooltipLabel:ve,margin:E}),we=ke.bars,Oe=ke.xScale,Ie=ke.yScale,Te=x((function(){return we.filter((function(e){return null!==e.data.value})).map((function(e,t){return J({},e,{index:t})}))}),[we]),Pe=S((function(e){var t=e.width,a=e.height;return!!Z&&(!(ee>0&&t<ee)&&!(ae>0&&a<ae))}),[Z,ee,ae]),Ee=x((function(){return n.map((function(e){var t=we.find((function(t){return t.data.id===e}));return J({},t,{data:J({id:e},null==t?void 0:t.data,{hidden:se.includes(e)})})}))}),[se,n,we]),He=x((function(){return re.map((function(e){return[e,Ce({bars:"keys"===e.dataFrom?Ee:we,direction:e.direction,from:e.dataFrom,groupMode:L,layout:V,legendLabel:le,reverse:W})]}))}),[re,Ee,we,L,V,le,W]),Re=x((function(){return function(e,t,a,i,n,r,l){void 0===i&&(i=ne.layout),void 0===n&&(n=ne.groupMode);var o=[];if(0===e.length)return o;var d=new Map,u=e[0].width,s=e[0].height;if("stacked"===n){var c=new Map;e.forEach((function(e){var t=e.data,a=t.indexValue,i=t.value;Ve(d,a,Number(i)),Me(c,a,Number(i))})),c.forEach((function(e,n){var c,h,f,b=d.get(n)||0;"vertical"===i?(c=t(n),h=a(e),f=a(e/2)):(c=t(e),h=a(n),f=t(e/2)),c+="vertical"===i?u/2:r,h+="vertical"===i?-r:s/2,o.push({key:"total_"+n,x:c,y:h,value:b,formattedValue:l(b),animationOffset:f})}))}else if("grouped"===n){var h=new Map,f=new Map;e.forEach((function(e){var t=e.data,a=t.indexValue,i=t.value;Ve(d,a,Number(i)),We(h,a,Number(i)),Be(f,a)})),h.forEach((function(e,n){var c,h,b,v=d.get(n)||0,g=f.get(n);"vertical"===i?(c=t(n),h=a(e),b=a(e/2)):(c=t(e),h=a(n),b=t(e/2)),c+="vertical"===i?g*u/2:r,h+="vertical"===i?-r:g*s/2,o.push({key:"total_"+n,x:c,y:h,value:v,formattedValue:l(v),animationOffset:b})}))}return o}(we,Oe,Ie,V,L,de,ge)}),[we,Oe,Ie,V,L,de,ge]);return{bars:we,barsWithValue:Te,xScale:Oe,yScale:Ie,getIndex:fe,getLabel:be,getTooltipLabel:ve,formatValue:ge,getColor:pe,getBorderColor:ye,getLabelColor:Se,shouldRenderBarLabel:Pe,hiddenIds:se,toggleSerie:he,legendsWithData:He,barTotals:Re}},Ie=function(e){var t=e.data,a=e.springConfig,i=e.animate,n=e.layout,r=void 0===n?re.layout:n,l=D();return p(t,{keys:function(e){return e.key},from:function(e){return{x:"vertical"===r?e.x:e.animationOffset,y:"vertical"===r?e.animationOffset:e.y,labelOpacity:0}},enter:function(e){return{x:e.x,y:e.y,labelOpacity:1}},update:function(e){return{x:e.x,y:e.y,labelOpacity:1}},leave:function(e){return{x:"vertical"===r?e.x:e.animationOffset,y:"vertical"===r?e.animationOffset:e.y,labelOpacity:0}},config:a,immediate:!i,initial:i?void 0:null})((function(e,t){return I(g.text,{x:e.x,y:e.y,fillOpacity:e.labelOpacity,style:J({},l.labels.text,{pointerEvents:"none"}),fontWeight:"bold",fontSize:l.labels.text.fontSize,fontFamily:l.labels.text.fontFamily,textAnchor:"vertical"===r?"middle":"start",alignmentBaseline:"vertical"===r?"alphabetic":"middle",children:t.formattedValue},t.key)}))},Te=["isInteractive","animate","motionConfig","theme","renderWrapper"],Pe=function(a){var i=a.data,n=a.indexBy,r=a.keys,l=a.margin,o=a.width,f=a.height,b=a.groupMode,v=a.layout,g=a.reverse,m=a.minValue,S=a.maxValue,k=a.valueScale,L=a.indexScale,C=a.padding,V=a.innerPadding,M=a.axisTop,W=a.axisRight,B=a.axisBottom,O=void 0===B?re.axisBottom:B,T=a.axisLeft,P=void 0===T?re.axisLeft:T,E=a.enableGridX,H=void 0===E?re.enableGridX:E,R=a.enableGridY,F=void 0===R?re.enableGridY:R,D=a.gridXValues,A=a.gridYValues,X=a.layers,Y=void 0===X?re.layers:X,G=a.barComponent,z=void 0===G?re.barComponent:G,N=a.enableLabel,j=void 0===N?re.enableLabel:N,K=a.label,_=a.labelSkipWidth,q=void 0===_?re.labelSkipWidth:_,Q=a.labelSkipHeight,U=void 0===Q?re.labelSkipHeight:Q,ee=a.labelTextColor,te=a.labelPosition,ae=void 0===te?re.labelPosition:te,ie=a.labelOffset,ne=void 0===ie?re.labelOffset:ie,le=a.markers,oe=void 0===le?re.markers:le,de=a.colorBy,ue=a.colors,se=a.defs,he=void 0===se?re.defs:se,fe=a.fill,be=void 0===fe?re.fill:fe,ve=a.borderRadius,ge=void 0===ve?re.borderRadius:ve,me=a.borderWidth,pe=void 0===me?re.borderWidth:me,xe=a.borderColor,ye=a.annotations,Se=void 0===ye?re.annotations:ye,ke=a.legendLabel,we=a.tooltipLabel,Le=a.valueFormat,Ce=a.isInteractive,Ve=void 0===Ce?re.isInteractive:Ce,Me=a.tooltip,We=void 0===Me?re.tooltip:Me,Be=a.onClick,Te=a.onMouseEnter,Pe=a.onMouseLeave,Ee=a.legends,He=a.role,Re=void 0===He?re.role:He,Fe=a.ariaLabel,De=a.ariaLabelledBy,Ae=a.ariaDescribedBy,Xe=a.isFocusable,Ye=void 0===Xe?re.isFocusable:Xe,Ge=a.barAriaLabel,ze=a.barAriaLabelledBy,Ne=a.barAriaDescribedBy,je=a.barAriaHidden,Ke=a.barAriaDisabled,_e=a.initialHiddenIds,qe=a.enableTotals,Je=void 0===qe?re.enableTotals:qe,Qe=a.totalsOffset,Ue=void 0===Qe?re.totalsOffset:Qe,Ze=d(),$e=Ze.animate,et=Ze.config,tt=u(o,f,l),at=tt.outerWidth,it=tt.outerHeight,nt=tt.margin,rt=tt.innerWidth,lt=tt.innerHeight,ot=Oe({indexBy:n,label:K,tooltipLabel:we,valueFormat:Le,colors:ue,colorBy:de,borderColor:xe,labelTextColor:ee,groupMode:b,layout:v,reverse:g,data:i,keys:r,minValue:m,maxValue:S,margin:nt,width:rt,height:lt,padding:C,innerPadding:V,valueScale:k,indexScale:L,enableLabel:j,labelSkipWidth:q,labelSkipHeight:U,legends:Ee,legendLabel:ke,initialHiddenIds:_e,totalsOffset:Ue}),dt=ot.bars,ut=ot.barsWithValue,st=ot.xScale,ct=ot.yScale,ht=ot.getLabel,ft=ot.getTooltipLabel,bt=ot.getBorderColor,vt=ot.getLabelColor,gt=ot.shouldRenderBarLabel,mt=ot.toggleSerie,pt=ot.legendsWithData,xt=ot.barTotals,yt=ot.getColor,St=ce(v,g,ae,ne),kt=p(ut,{keys:function(e){return e.key},from:function(e){return J({borderColor:bt(e),color:e.color,height:0,labelColor:vt(e),labelOpacity:0},St(e.width,e.height),{transform:"translate("+e.x+", "+(e.y+e.height)+")",width:e.width},"vertical"===v?{}:{height:e.height,transform:"translate("+e.x+", "+e.y+")",width:0})},enter:function(e){return J({borderColor:bt(e),color:e.color,height:e.height,labelColor:vt(e),labelOpacity:1},St(e.width,e.height),{transform:"translate("+e.x+", "+e.y+")",width:e.width})},update:function(e){return J({borderColor:bt(e),color:e.color,height:e.height,labelColor:vt(e),labelOpacity:1},St(e.width,e.height),{transform:"translate("+e.x+", "+e.y+")",width:e.width})},leave:function(e){return J({borderColor:bt(e),color:e.color,height:0,labelColor:vt(e),labelOpacity:0},St(e.width,e.height),{labelY:0,transform:"translate("+e.x+", "+(e.y+e.height)+")",width:e.width},"vertical"===v?{}:J({},St(e.width,e.height),{labelX:0,height:e.height,transform:"translate("+e.x+", "+e.y+")",width:0}))},config:et,immediate:!$e,initial:$e?void 0:null}),wt=x((function(){return{borderRadius:ge,borderWidth:pe,enableLabel:j,isInteractive:Ve,labelSkipWidth:q,labelSkipHeight:U,onClick:Be,onMouseEnter:Te,onMouseLeave:Pe,getTooltipLabel:ft,tooltip:We,isFocusable:Ye,ariaLabel:Ge,ariaLabelledBy:ze,ariaDescribedBy:Ne,ariaHidden:je,ariaDisabled:Ke}}),[ge,pe,j,ft,Ve,U,q,Be,Te,Pe,We,Ye,Ge,ze,Ne,je,Ke]),Lt=s(he,dt,be,{dataKey:"data",targetKey:"data.fill"}),Ct={annotations:null,axes:null,bars:null,grid:null,legends:null,markers:null,totals:null};Y.includes("annotations")&&(Ct.annotations=I(Z,{bars:dt,annotations:Se},"annotations")),Y.includes("axes")&&(Ct.axes=I(e,{xScale:st,yScale:ct,width:rt,height:lt,top:M,right:W,bottom:O,left:P},"axes")),Y.includes("bars")&&(Ct.bars=I(w,{children:kt((function(e,t){return y(z,J({},wt,{bar:t,style:e,shouldRenderLabel:gt(t),label:ht(t.data)}))}))},"bars")),Y.includes("grid")&&(Ct.grid=I(t,{width:rt,height:lt,xScale:H?st:null,yScale:F?ct:null,xValues:D,yValues:A},"grid")),Y.includes("legends")&&(Ct.legends=I($,{width:rt,height:lt,legends:pt,toggleSerie:mt},"legends")),Y.includes("markers")&&(Ct.markers=I(c,{markers:oe,width:rt,height:lt,xScale:st,yScale:ct},"markers")),Y.includes("totals")&&Je&&(Ct.totals=I(Ie,{data:xt,springConfig:et,animate:$e,layout:v},"totals"));var Vt=x((function(){return J({},wt,{margin:nt,width:o,height:f,innerWidth:rt,innerHeight:lt,bars:dt,legendData:pt,enableLabel:j,xScale:st,yScale:ct,tooltip:We,getTooltipLabel:ft,onClick:Be,onMouseEnter:Te,onMouseLeave:Pe,getColor:yt})}),[wt,nt,o,f,rt,lt,dt,pt,j,st,ct,We,ft,Be,Te,Pe,yt]);return I(h,{width:at,height:it,margin:nt,defs:Lt,role:Re,ariaLabel:Fe,ariaLabelledBy:De,ariaDescribedBy:Ae,isFocusable:Ye,children:Y.map((function(e,t){var a;return"function"==typeof e?I(w,{children:y(e,Vt)},t):null!=(a=null==Ct?void 0:Ct[e])?a:null}))})},Ee=function(e){var t=e.isInteractive,a=void 0===t?re.isInteractive:t,i=e.animate,n=void 0===i?re.animate:i,r=e.motionConfig,l=void 0===r?re.motionConfig:r,d=e.theme,u=e.renderWrapper,s=Q(e,Te);return I(o,{animate:n,isInteractive:a,motionConfig:l,renderWrapper:u,theme:d,children:I(Pe,J({isInteractive:a},s))})},He=["isInteractive","renderWrapper","theme"],Re=function(e,t,a,i){return e.find((function(e){return b(e.x+t.left,e.y+t.top,e.width,e.height,a,i)}))};var Fe=function(e){var t=e.data,n=e.indexBy,r=e.keys,o=e.margin,d=e.width,s=e.height,c=e.groupMode,h=e.layout,b=e.reverse,v=e.minValue,g=e.maxValue,m=e.valueScale,p=e.indexScale,k=e.padding,w=e.innerPadding,L=e.axisTop,W=e.axisRight,T=e.axisBottom,P=void 0===T?le.axisBottom:T,E=e.axisLeft,R=void 0===E?le.axisLeft:E,F=e.enableGridX,X=void 0===F?le.enableGridX:F,Y=e.enableGridY,N=void 0===Y?le.enableGridY:Y,j=e.gridXValues,K=e.gridYValues,_=e.labelPosition,Q=void 0===_?le.labelPosition:_,U=e.labelOffset,Z=void 0===U?le.labelOffset:U,$=e.layers,ee=void 0===$?le.layers:$,te=e.renderBar,ae=void 0===te?function(e,t){var a=t.bar,i=a.color,n=a.height,r=a.width,l=a.x,o=a.y,d=t.borderColor,u=t.borderRadius,s=t.borderWidth,c=t.label,h=t.shouldRenderLabel,f=t.labelStyle,b=t.labelX,v=t.labelY,g=t.textAnchor;e.fillStyle=i,s>0&&(e.strokeStyle=d,e.lineWidth=s),e.beginPath(),q(e,l,o,r,n,Math.min(u,n)),e.fill(),s>0&&e.stroke(),h&&(e.textBaseline="middle",e.textAlign="middle"===g?"center":g,z(e,f,c,l+b,o+v))}:te,ie=e.enableLabel,ne=void 0===ie?le.enableLabel:ie,re=e.label,oe=e.labelSkipWidth,de=void 0===oe?le.labelSkipWidth:oe,ue=e.labelSkipHeight,se=void 0===ue?le.labelSkipHeight:ue,he=e.labelTextColor,fe=e.colorBy,be=e.colors,ve=e.borderRadius,ge=void 0===ve?le.borderRadius:ve,me=e.borderWidth,pe=void 0===me?le.borderWidth:me,xe=e.borderColor,ye=e.annotations,Se=void 0===ye?le.annotations:ye,ke=e.legendLabel,we=e.tooltipLabel,Le=e.valueFormat,Ce=e.isInteractive,Ve=void 0===Ce?le.isInteractive:Ce,Me=e.tooltip,We=void 0===Me?le.tooltip:Me,Be=e.onClick,Ie=e.onMouseEnter,Te=e.onMouseLeave,Pe=e.legends,Ee=e.pixelRatio,He=void 0===Ee?le.pixelRatio:Ee,Fe=e.canvasRef,De=e.enableTotals,Ae=void 0===De?le.enableTotals:De,Xe=e.totalsOffset,Ye=void 0===Xe?le.totalsOffset:Xe,Ge=C(null),ze=D(),Ne=u(d,s,o),je=Ne.margin,Ke=Ne.innerWidth,_e=Ne.innerHeight,qe=Ne.outerWidth,Je=Ne.outerHeight,Qe=Oe({indexBy:n,label:re,tooltipLabel:we,valueFormat:Le,colors:be,colorBy:fe,borderColor:xe,labelTextColor:he,groupMode:c,layout:h,reverse:b,data:t,keys:r,minValue:v,maxValue:g,margin:je,width:Ke,height:_e,padding:k,innerPadding:w,valueScale:m,indexScale:p,enableLabel:ne,labelSkipWidth:de,labelSkipHeight:se,legends:Pe,legendLabel:ke,totalsOffset:Ye}),Ue=Qe.bars,Ze=Qe.barsWithValue,$e=Qe.xScale,et=Qe.yScale,tt=Qe.getLabel,at=Qe.getTooltipLabel,it=Qe.getBorderColor,nt=Qe.getLabelColor,rt=Qe.shouldRenderBarLabel,lt=Qe.legendsWithData,ot=Qe.barTotals,dt=Qe.getColor,ut=A(),st=ut.showTooltipFromEvent,ct=ut.hideTooltip,ht=B({annotations:M({data:Ue,annotations:Se,getPosition:function(e){return{x:e.x,y:e.y}},getDimensions:function(e){var t=e.width,a=e.height;return{width:t,height:a,size:Math.max(t,a)}}})}),ft=x((function(){return{borderRadius:ge,borderWidth:pe,isInteractive:Ve,isFocusable:!1,labelSkipWidth:de,labelSkipHeight:se,margin:je,width:d,height:s,innerWidth:Ke,innerHeight:_e,bars:Ue,legendData:lt,enableLabel:ne,xScale:$e,yScale:et,tooltip:We,getTooltipLabel:at,onClick:Be,onMouseEnter:Ie,onMouseLeave:Te,getColor:dt}}),[ge,pe,Ve,de,se,je,d,s,Ke,_e,Ue,lt,ne,$e,et,We,at,Be,Ie,Te,dt]),bt=l(Le),vt=ce(h,b,Q,Z);V((function(){var e,t=null==(e=Ge.current)?void 0:e.getContext("2d");Ge.current&&t&&(Ge.current.width=qe*He,Ge.current.height=Je*He,t.scale(He,He),t.fillStyle=ze.background,t.fillRect(0,0,qe,Je),t.translate(je.left,je.top),ee.forEach((function(e){"grid"===e?"number"==typeof ze.grid.line.strokeWidth&&ze.grid.line.strokeWidth>0&&(t.lineWidth=ze.grid.line.strokeWidth,t.strokeStyle=ze.grid.line.stroke,X&&a(t,{width:Ke,height:_e,scale:$e,axis:"x",values:j}),N&&a(t,{width:Ke,height:_e,scale:et,axis:"y",values:K})):"axes"===e?i(t,{xScale:$e,yScale:et,width:Ke,height:_e,top:L,right:W,bottom:P,left:R,theme:ze}):"bars"===e?(G(t,ze.text),Ze.forEach((function(e){ae(t,J({bar:e,borderColor:it(e),borderRadius:ge,borderWidth:pe,label:tt(e.data),shouldRenderLabel:rt(e),labelStyle:J({},ze.labels.text,{fill:nt(e)})},vt(e.width,e.height)))}))):"legends"===e?lt.forEach((function(e){var a=e[0],i=e[1];H(t,J({},a,{data:i,containerWidth:Ke,containerHeight:_e,theme:ze}))})):"annotations"===e?O(t,{annotations:ht,theme:ze}):"totals"===e&&Ae?function(e,t,a,i){void 0===i&&(i=le.layout),G(e,a.labels.text),e.textBaseline="vertical"===i?"alphabetic":"middle",e.textAlign="vertical"===i?"center":"start",t.forEach((function(t){z(e,a.labels.text,t.formattedValue,t.x,t.y)}))}(t,ot,ze,h):"function"==typeof e&&e(t,ft)})),t.save())}),[P,R,W,L,Ze,ge,pe,ht,X,N,it,tt,nt,j,K,c,s,_e,Ke,ft,ee,h,lt,je.left,je.top,Je,qe,He,ae,$e,et,b,rt,ze,d,ot,Ae,bt,vt]);var gt=S((function(e){if(Ue&&Ge.current){var t=f(Ge.current,e),a=t[0],i=t[1],n=Re(Ue,je,a,i);void 0!==n?(st(y(We,J({},n.data,{color:n.color,label:n.label,value:Number(n.data.value)})),e),"mouseenter"===e.type&&(null==Ie||Ie(n.data,e))):ct()}}),[ct,je,Ie,Ue,st,We]),mt=S((function(e){if(Ue&&Ge.current){ct();var t=f(Ge.current,e),a=t[0],i=t[1],n=Re(Ue,je,a,i);n&&(null==Te||Te(n.data,e))}}),[ct,je,Te,Ue]),pt=S((function(e){if(Ue&&Ge.current){var t=f(Ge.current,e),a=t[0],i=t[1],n=Re(Ue,je,a,i);void 0!==n&&(null==Be||Be(J({},n.data,{color:n.color}),e))}}),[je,Be,Ue]);return I("canvas",{ref:function(e){Ge.current=e,Fe&&"current"in Fe&&(Fe.current=e)},width:qe*He,height:Je*He,style:{width:qe,height:Je,cursor:Ve?"auto":"normal"},onMouseEnter:Ve?gt:void 0,onMouseMove:Ve?gt:void 0,onMouseLeave:Ve?mt:void 0,onClick:Ve?pt:void 0})},De=L((function(e,t){var a=e.isInteractive,i=e.renderWrapper,n=e.theme,r=Q(e,He);return I(o,{isInteractive:a,renderWrapper:i,theme:n,animate:!1,children:I(Fe,J({},r,{canvasRef:t}))})})),Ae=function(e){return I(v,{children:function(t){var a=t.width,i=t.height;return I(Ee,J({width:a,height:i},e))}})},Xe=L((function(e,t){return I(v,{children:function(a){var i=a.width,n=a.height;return I(De,J({width:i,height:n},e,{ref:t}))}})}));export{Ee as Bar,De as BarCanvas,te as BarItem,ie as BarTooltip,Ie as BarTotals,Ae as ResponsiveBar,Xe as ResponsiveBarCanvas,le as canvasDefaultProps,ne as defaultProps,re as svgDefaultProps};
//# sourceMappingURL=nivo-bar.mjs.map
